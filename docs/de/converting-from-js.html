<!DOCTYPE html><html lang="de"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Converting from JS · Reason</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;vorbereitung&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#vorbereitung&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Vorbereitung&lt;/h2&gt;
"/><meta name="docsearch:language" content="de"/><meta property="og:title" content="Converting from JS · Reason"/><meta property="og:type" content="website"/><meta property="og:url" content="https://reasonml.github.io/"/><meta property="og:description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;vorbereitung&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#vorbereitung&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Vorbereitung&lt;/h2&gt;
"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/icon_50.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://reasonml.github.io/blog/atom.xml" title="Reason Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://reasonml.github.io/blog/feed.xml" title="Reason Blog RSS Feed"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/de"><img class="logo" src="/img/dummy.svg" alt="Reason"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/de/what-and-why" target="_self">Docs</a></li><li class=""><a href="/de/try" target="_self">Try</a></li><li class=""><a href="/api/index" target="_self">API</a></li><li class=""><a href="/docs/de/community" target="_self">Community</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Deutsch</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ja/converting-from-js">日本語</a></li><li><a href="/docs/en/converting-from-js">English</a></li><li><a href="/docs/es-ES/converting-from-js">Español</a></li><li><a href="/docs/fr/converting-from-js">Français</a></li><li><a href="/docs/ko/converting-from-js">한국어</a></li><li><a href="/docs/pt-BR/converting-from-js">Português (Brasil)</a></li><li><a href="/docs/ru/converting-from-js">Русский</a></li><li><a href="/docs/uk/converting-from-js">Українська</a></li><li><a href="/docs/zh-CN/converting-from-js">中文</a></li><li><a href="/docs/zh-TW/converting-from-js">繁體中文</a></li><li><a href="https://crowdin.com/project/reason" target="_blank" rel="noreferrer noopener">Beim Übersetzen helfen</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/reason" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>JavaScript</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Intro</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/what-and-why">What &amp; Why</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Setup</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/de/editor-plugins">Editor Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/de/extra-goodies">Extra Goodies</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Language Basics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/let-binding">Let Binding</a></li><li class="navListItem"><a class="navItem" href="/docs/de/type">Type!</a></li><li class="navListItem"><a class="navItem" href="/docs/de/string-and-char">String &amp; Char</a></li><li class="navListItem"><a class="navItem" href="/docs/de/boolean">Boolean</a></li><li class="navListItem"><a class="navItem" href="/docs/de/integer-and-float">Integer &amp; Float</a></li><li class="navListItem"><a class="navItem" href="/docs/de/tuple">Tuple</a></li><li class="navListItem"><a class="navItem" href="/docs/de/record">Record</a></li><li class="navListItem"><a class="navItem" href="/docs/de/variant">Variant!</a></li><li class="navListItem"><a class="navItem" href="/docs/de/null-undefined-option">Null, Undefined &amp; Option</a></li><li class="navListItem"><a class="navItem" href="/docs/de/list-and-array">List &amp; Array</a></li><li class="navListItem"><a class="navItem" href="/docs/de/function">Function</a></li><li class="navListItem"><a class="navItem" href="/docs/de/if-else">If-Else</a></li><li class="navListItem"><a class="navItem" href="/docs/de/pipe-first">Pipe First</a></li><li class="navListItem"><a class="navItem" href="/docs/de/more-on-type">More on Type</a></li><li class="navListItem"><a class="navItem" href="/docs/de/destructuring">Destructuring</a></li><li class="navListItem"><a class="navItem" href="/docs/de/pattern-matching">Pattern Matching!</a></li><li class="navListItem"><a class="navItem" href="/docs/de/mutation">Mutation</a></li><li class="navListItem"><a class="navItem" href="/docs/de/imperative-loops">Imperative Loops</a></li><li class="navListItem"><a class="navItem" href="/docs/de/jsx">JSX</a></li><li class="navListItem"><a class="navItem" href="/docs/de/external">External</a></li><li class="navListItem"><a class="navItem" href="/docs/de/exception">Exception</a></li><li class="navListItem"><a class="navItem" href="/docs/de/object">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/de/module">Module</a></li><li class="navListItem"><a class="navItem" href="/docs/de/promise">Promise</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">JavaScript</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/interop">Interop</a></li><li class="navListItem"><a class="navItem" href="/docs/de/syntax-cheatsheet">Syntax Cheatsheet</a></li><li class="navListItem"><a class="navItem" href="/docs/de/libraries">Libraries</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/de/converting-from-js">Converting from JS</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Native</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/native">Native</a></li><li class="navListItem"><a class="navItem" href="/docs/de/quickstart-ocaml">Native Quickstart</a></li><li class="navListItem"><a class="navItem" href="/docs/de/convert-from-ocaml">Converting from OCaml</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Extra</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/faq">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/docs/de/comparison-to-ocaml">Comparison to OCaml</a></li><li class="navListItem"><a class="navItem" href="/docs/de/newcomer-examples">Newcomer Examples</a></li><li class="navListItem"><a class="navItem" href="/docs/de/project-structure">Project Structure</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/reason/de" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">Converting from JS</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="vorbereitung"></a><a href="#vorbereitung" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vorbereitung</h2>
<p><strong>Bevor du fortfährst</strong>, stelle bitte sicher, dass Reason das ist, was dein Team braucht! So sehr wir für die Popularität von Reason und BuckleScript bürgen, bitte verprell deine Kollegen nicht unnötig und gebe ihnen nicht einen schlechten ersten Eindruck. Das ist schwer hinterher zu ändern.</p>
<p>Dieser Leitfaden behandelt einen Workflow, der uns dabei geholfen hat, Dinge schnell und effizient umzusetzen. Es ist nicht beabsichtigt, Sprach-/FFI-Funktionen zu behandeln (obwohl es sie in Kontext stellt). Grundlegende Kenntnis von Reason/BuckleScript wird vorausgesetzt.</p>
<h2><a class="anchor" aria-hidden="true" id="syntax"></a><a href="#syntax" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntax</h2>
<p><strong>Ziel</strong>: zuallererst sorge dafür, dass <strong>die Datei syntaktisch gültig ist</strong>. Kümmere dich nicht um falsche Typen, fehlende Module, schlechte Dateiorganisation, zu viele externals usw. Wir werden zurückkommen, um diese zu bereinigen, nachdem wir den Regressionstest „keine Syntaxfehler mehr“ eingerichtet haben.</p>
<p>Da die Reason-Syntax der von JavaScript ähnelt, kann man anstelle einer neuen Reason-Datei einfach eine vorhandene JS-Datei kopieren und darauf aufbauend arbeiten.</p>
<p><em>Tipp</em>: vergiss nicht, dass du <code>refmt</code> in deinem Editor/Terminal verwenden kannst! Wenn du z.B. nicht den Vorrang einiger Operationen kennst, dann umgebe sie mit beliebig vielen Klammern, führe dann <code>refmt</code> auf deinem Code aus und schau welche übrig bleiben. Ebenso brauchst du keine Zeit mit Einrückungen und Abständen zu verlieren. <code>refmt</code> kümmert sich darum.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">/* originale JS-Datei die du kopiert hast */</span>
<span class="hljs-keyword">const</span> school = <span class="hljs-built_in">require</span>(<span class="hljs-string">'school'</span>);

<span class="hljs-keyword">const</span> defaultId = <span class="hljs-number">10</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">queryResult</span>(<span class="hljs-params">usePayload, payload</span>) </span>{
  <span class="hljs-keyword">if</span> (usePayload) {
    <span class="hljs-keyword">return</span> payload.student
  }
  <span class="hljs-keyword">return</span> school.getStudentById(defaultId);
}
</code></pre>
<p>Hier sind einige der Dinge, die du in diesem Schritt tun würdest:</p>
<ul>
<li>Konvertiere die Syntax des Funktionsaufrufs.</li>
<li>Konvertiere <code>var</code>/<code>const</code> nach <code>let</code>.</li>
<li>Verberge die <code>require</code>s.</li>
<li>Führe weitere solcher Änderungen durch. Für Idiome, die kein Äquivalent in BuckleScript haben, verwende <code>bs.raw</code> (<a href="https://bucklescript.github.io/docs/en/embed-raw-javascript.html">documentation</a>).</li>
</ul>
<p>Nochmals, <strong>sorge dich nur darum, die Datei syntaktisch gültig zu machen</strong>. Der Versuch, beim Konvertieren einer Datei alle drei Syntaxarten, Typen und andere Semantiken zu lernen, reduziert die Iterationsgeschwindigkeit auf weniger als ein Drittel.</p>
<pre><code class="hljs css language-reason"><span class="hljs-comment">/* syntaktisch gültige, semantisch falsche Konvertierung */</span>
<span class="hljs-comment">/* const school = require('school'); */</span>
<span class="hljs-keyword">let</span> defaultId = <span class="hljs-number">10</span>;

<span class="hljs-keyword">let</span> queryResult = (usePayload, payload) =&gt;
  <span class="hljs-keyword">if</span> (usePayload) {
    payload.student
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">/* kein vorzeitiges return in Reason gebraucht; if-else ist ein Ausdruck */</span>
    school.getStudentById(
      defaultId
    )
  };
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="typen-erster-durchgang"></a><a href="#typen-erster-durchgang" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Typen, erster Durchgang</h2>
<p><strong>Ziel</strong>: korrigiere die Typen, aber gerade genug, um zum nächsten Schritt zu gehen.</p>
<p>Du könntest gelegentlich Syntaxfehler bekommen, aber nicht so drastisch wie im vorherigen Schritt.</p>
<ul>
<li>Ändere <code>foo.bar</code> in <code>foo##bar</code>. Dieses <a href="https://bucklescript.github.io/docs/en/object.html#object-as-record">BuckleScript-Feature</a> ist eine Notlösung, die mittelfristig dein Freund sein wird.</li>
<li>Konvertiere <code>{foo: bar}</code> zu <code>[%bs.obj {foo: bar}]</code> (<a href="https://bucklescript.github.io/docs/en/object.html#creation">Doku</a>). Nach <code>refmt</code> wird dies <code>{&quot;foo&quot;: bar}</code> ergeben.</li>
<li>Um mit externen JS-Dateien zu kommunizieren, verwende <code>external</code>. Diese sind BuckleScripts <a href="https://bucklescript.github.io/docs/en/intro-to-external.html">foreign function interface</a>.
<ul>
<li>Inline externals. Vorerst keine Notwendigkeit, saubere, gut getrennte Dateien für externals zu erstellen. Wir werden auf diese zurückkommen.</li>
<li>Wenn es zu umständlich ist, die Eingabe/Ausgabe von <code>external</code> zu typisieren, dann verwende einige polymorphe Platzhaldertypen, z. B. <code>external getStudentById: 'whatever =&gt; 'whateverElse = ...</code>.</li>
<li>Für Datentypen &amp; Muster, die schwer auf ordentliche Weise zu konvertieren sind, kannst du gelegentlich Konverter erstellen wie <code>external unsafeCast : myPayloadType =&gt; anotherDataType = &quot;%identity&quot;;</code>.</li>
</ul></li>
</ul>
<p>Dies ist der erste Durchgang. Die endgültigen Typen sehen wahrscheinlich anders aus. Ernte vorerst die Belohnungen! Sobald du endlich alle Typfehler behoben hast, sollte deine JS-Datei nun generiert werden. Halte sie nebeneinander geöffnet. Zeit zurückzukehren und alle Hacks zu reparieren!</p>
<pre><code class="hljs css language-reason"><span class="hljs-comment">/* syntaktisch gültig, semantisch falsch, aber besser */</span>
<span class="hljs-attribute">[@bs.module "school"]</span> <span class="hljs-keyword">external</span> getStudentById : 'whatever =&gt; 'whateverElse = <span class="hljs-string">"getStudentById"</span>;

<span class="hljs-keyword">let</span> defaultId = <span class="hljs-number">10</span>;

<span class="hljs-keyword">let</span> queryResult = (usePayload, payload) =&gt;
  <span class="hljs-keyword">if</span> (usePayload) {
    payload##student <span class="hljs-comment">/* this will be inferred as `Js.t 'a` */</span>
  } <span class="hljs-keyword">else</span> {
    getStudentById(defaultId)
  };
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="laufzeitsemantik"></a><a href="#laufzeitsemantik" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Laufzeitsemantik</h2>
<p><strong>Ziel</strong>: behebe die Fehler in der generierten JS-Ausgabe.</p>
<p>Vergleiche es mit deiner alten JS-Datei. Die Ausgabe ist wahrscheinlich falsch. Du hast wahrscheinlich einige Idiome falsch umgesetzt und einige externals falsch geschrieben.</p>
<ul>
<li>Gebe die Form der JS-Objekte ein (die Dinge, die <code>##</code> erforderten).</li>
<li>Konvertiere alle Teile in Records/Varianten/idiomatische OCaml-Typen.</li>
</ul>
<p>Überprüfe die ganze Zeit, ob es in der Ausgabe Änderungen gibt.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> student; <span class="hljs-comment">/* abstrakter Typ, wird später beschrieben */</span>

<span class="hljs-attribute">[@bs.module "school"]</span> <span class="hljs-keyword">external</span> getStudentById : 'whatever =&gt; student = <span class="hljs-string">"getStudentById"</span>;

<span class="hljs-keyword">type</span> payloadType = {. <span class="hljs-string">"student"</span>: student};

<span class="hljs-keyword">let</span> defaultId = <span class="hljs-number">10</span>;

<span class="hljs-keyword">let</span> queryResult = (usePayload, payload: payloadType) =&gt;
  <span class="hljs-keyword">if</span> (usePayload) {
    payload##student
  } <span class="hljs-keyword">else</span> {
    getStudentById(defaultId)
  };
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="aufraumen-typen-zweiter-durchgang"></a><a href="#aufraumen-typen-zweiter-durchgang" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Aufräumen (Typen, zweiter Durchgang)</h2>
<p><strong>Ziel</strong>: Mach deine Typen regelkonform (korrekt).</p>
<p>Gehe zurück und repariere, was du während des ersten Durchgangs übrig gelassen hast.</p>
<ul>
<li>Stelle sicher, dass du keine <code>'whatever</code>-Typen in <code>externals</code>s übrig gelassen hast.</li>
<li>Du kannst die <code>external</code>s inline beibehalten oder sie in eine Datei auslagern.</li>
</ul>
<pre><code class="hljs css language-reason"><span class="hljs-comment">/* in der aktuellen Datei */</span>
<span class="hljs-keyword">type</span> payloadType = {. <span class="hljs-string">"student"</span>: <span class="hljs-module-identifier">School</span>.student}; <span class="hljs-comment">/* <span class="hljs-doctag">TODO:</span> schiebe dies woanders hin! */</span>

<span class="hljs-keyword">let</span> defaultId = <span class="hljs-number">10</span>;

<span class="hljs-keyword">let</span> queryResult = (usePayload, payload: payloadType) =&gt;
  <span class="hljs-keyword">if</span> (usePayload) {
    payload##student
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-module-identifier">School</span>.getStudentById(defaultId)
  };
</code></pre>
<pre><code class="hljs css language-reason"><span class="hljs-comment">/* in einer dezidierten Datei School.re */</span>
<span class="hljs-keyword">type</span> student;

<span class="hljs-attribute">[@bs.module "School"]</span> <span class="hljs-keyword">external</span> getStudentById : int =&gt; student = <span class="hljs-string">"getStudentById"</span>;
<span class="hljs-attribute">[@bs.module "School"]</span> <span class="hljs-keyword">external</span> getAllStudents : unit =&gt; array(student) = <span class="hljs-string">"getAllStudents"</span>;
</code></pre>
<p>Der Typ <code>student</code> hat keinen eigentlichen Inhalt. Dies wird ein <a href="/docs/de/module#signatures">abstrakter Typ</a> genannt. Es ist eine bequeme Möglichkeit, die Beziehung zwischen Aufrufen von externals anzugeben, ohne zu wissen, wie die Daten unter der Haube aufgebaut sind.</p>
<p>Und dann bist du fertig!</p>
<h2><a class="anchor" aria-hidden="true" id="tipps"></a><a href="#tipps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tipps</h2>
<p>Versuche <strong>nicht</strong>, eine JS-Datei in einem einzigen Durchgang vollständig in eine makellose Reason-Datei zu konvertieren. Solch ein Vorgehen könnte dich sogar verlangsamen! Es ist in Ordnung, externals und <code>bs.obj</code> übrig zu haben und vorübergehend die Vorteile von netten OCaml-Funktionen (Varianten, benannte Argumente usw.) nicht zu nutzen. Sobald du ein paar andere zugehörige Dateien konvertiert hast, kannst du zurückkommen und jetzt <strong>schneller</strong> umgestalten, indem du auf das Typsystem setzen.</p>
<p>Um die Übersichtlichkeit für deine Kollegen zu erhöhen und den Umgestaltungsfortschritt überschaubar zu halten sollten vorübergehende Unterstützungsfunktionen in eine <code>tempUtils.re</code> oder ähnliche Files ausgelagert werden.</p>
<p>Wir <strong>empfehlen dir sehr</strong>, das generierte JS in die Versionskontrolle einzupflegen. Es macht eine Integration in das Build-System quasi überflüssig und stellt sicher, dass deine Teammitglieder kleine Änderungen vornehmen, die Differenzen im generierten Code überprüfen und Fehler erkennen können, wenn du nicht da bist. Es ist auch ein großes Verkaufsargument, dass der eingecheckte, generierte JS-Code schnelle Bugfixes im Notfall ermöglicht (ein großes Verkaufsargument für Manager!). Selbst wenn du die BuckleScript-Version aktualisierst, würdest du jeden Unterschied im generierten JS-Code bemerken. Es ist wie kostenlose <a href="https://facebook.github.io/jest/docs/snapshot-testing.html">Jest snapshots</a>!</p>
<p>Wie üblich, melde dich bei uns bei <a href="https://discord.gg/reasonml">Discord</a> oder im <a href="https://reasonml.chat">Forum</a> für zusätzliche Hilfe!</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/de/libraries"><span class="arrow-prev">← </span><span>Libraries</span></a><a class="docs-next button" href="/docs/de/native"><span>Native</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#vorbereitung">Vorbereitung</a></li><li><a href="#syntax">Syntax</a></li><li><a href="#typen-erster-durchgang">Typen, erster Durchgang</a></li><li><a href="#laufzeitsemantik">Laufzeitsemantik</a></li><li><a href="#aufraumen-typen-zweiter-durchgang">Aufräumen (Typen, zweiter Durchgang)</a></li><li><a href="#tipps">Tipps</a></li></ul></nav></div><span><script src="/js/redirectBlog.js"></script><script src="/js/pjax-api.min.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper, .onPageNav',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '966d1e412f67114a07dc0afe44b19b53',
                indexName: 'reason',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:de"]}
              });
            </script></body></html>